class TecartCookieBanner{constructor(e,t,o,i){this.cookieBannerData=e,this.cookieBannerScripts=t,this.cookieBannerCategories=o,this.cookieBannerCategoriesData=i,null==this.cookieBannerScripts&&(this.cookieBannerScripts=[]),null==this.cookieBannerCategories&&(this.cookieBannerCategories=[]),null==this.cookieBannerCategoriesData&&(this.cookieBannerCategoriesData=[]),null==this.cookieConsentCategoriesArray&&(this.cookieConsentCategoriesArray=new Map),null==this.cookieConsentScriptsArray&&(this.cookieConsentScriptsArray=new Map),null==this.cookieConsentOnScrollScriptsArray&&(this.cookieConsentOnScrollScriptsArray=new Map),this.cookieConsent=this.getCookieByName("cookieconsent_status"),this.cookieConsentScripts=this.getCookieByName("cookieconsent_scripts"),this.cookieConsentCategories=this.getCookieByName("cookieconsent_categories"),this.cookieConsentOnScrollScripts=this.getCookieByName("cookieconsent_onscroll_scripts"),this.cookieConsentScrolled=this.getCookieByName("cookieconsent_scrolled")}init(){let e="";"activated"==this.getCookieBannerContent(this.cookieBannerData).buttonSettingsActive&&(e='<a aria-label="settings" role="button" tabIndex="0" class="button cc-btn cc-setting tcb-settings-btn '+this.getCookieBannerContent(this.cookieBannerData).buttonSettingsLayout+'" id="tcb-settings">'+this.getCookieBannerContent(this.cookieBannerData).settings+"</a>");let t="";"activated"==this.getCookieBannerContent(this.cookieBannerData).buttonDenyActive&&(t='<a aria-label="deny cookies" role="button" tabIndex="0" class="button cc-btn cc-deny '+this.getCookieBannerContent(this.cookieBannerData).buttonDenyLayout+'">'+this.getCookieBannerContent(this.cookieBannerData).deny+"</a>");const o={position:"bottom-left",type:"opt-in",palette:{popup:{background:"#f6f9fc",text:"#1e2022",border:"#1e2022"},button:{background:"#fff",text:"#5a5f69",border:"#5a5f69"}},layout:"tecart-cookie-banner",layouts:{"tecart-cookie-banner":'<div id="tecart-cookie-banner"><div class="cc-header">'+this.getCookieBannerContent(this.cookieBannerData).header+'</div><div id="cookieconsent:desc" class="cc-message">'+this.getCookieBannerContent(this.cookieBannerData).message+'</div><div class="cc-compliance cc-highlight"><a aria-label="allow cookies" role="button" tabIndex="0" class="button cc-btn cc-allow '+this.getCookieBannerContent(this.cookieBannerData).buttonAcceptLayout+'">'+this.getCookieBannerContent(this.cookieBannerData).allow+"</a>"+e+t+"</div></div>"},revokable:!0,animateRevokable:!0,revokeBtn:'<div class="cc-revoke cc-bottom cc-left cc-animate cc-revoke-from-plugin" style="color: '+this.getCookieBannerContent(this.cookieBannerData).buttonRevokableTextColor+"; background-color: "+this.getCookieBannerContent(this.cookieBannerData).buttonRevokableColor+"; border-color: "+this.getCookieBannerContent(this.cookieBannerData).buttonRevokableColor+';">'+this.getCookieBannerContent(this.cookieBannerData).revoke+"</div>",onStatusChange:function(e,t){const o=this.hasConsented(),i=new TecartCookieBanner(this.cookieBannerData,this.cookieBannerScripts,this.cookieBannerCategories);o?i.allowAllCookies():!1===o?i.denyAllCookies():i.allowSettingsCookies()},onRevokeChoice:function(e){}};window.cookieconsent.initialise(o),"dismiss"===this.cookieConsent?this.createScriptCode(this.cookieConsentScripts):(this.setCookieConsentCategoriesArray(),this.setCookieConsentScriptsArray()),this.removeSettingsModal(),this.createSettingsModal(this.cookieConsent)}allowAllCookies(){const e=this.cookieExpireDate();document.cookie="cookieconsent_status=allow;"+e+";path=/",console.log("All scripts for this website have been activated in this browser."),window.location.reload()}denyAllCookies(){this.deleteAllCookies(),this.removeCodeTags();const e=this.cookieExpireDate();document.cookie="cookieconsent_status=deny;"+e+";path=/",console.log("All scripts for this website have been deactivated in this browser."),window.location.reload()}allowSettingsCookies(){const e=this.cookieExpireDate();document.cookie="cookieconsent_status=dismiss;"+e+";path=/",console.log("All scripts for this website have set like in settings in this browser.")}setScrolledCookie(){const e=this.cookieExpireDate();document.cookie="cookieconsent_scrolled=scrolled;"+e+";path=/",console.log("Page was scrolled.")}setConsentCategoriesToCookie(e){e instanceof Map&&(e=Array.from(e));const t=this.cookieExpireDate(),o=JSON.stringify(e);document.cookie="cookieconsent_categories="+o+";"+t+";path=/"}setConsentScriptsToCookie(e){e instanceof Map&&(e=Array.from(e));const t=this.cookieExpireDate(),o=JSON.stringify(e);document.cookie="cookieconsent_scripts="+o+";"+t+";path=/"}setConsentOnScrollScriptsToCookie(e){e instanceof Map&&(e=Array.from(e));const t=this.cookieExpireDate(),o=JSON.stringify(e);document.cookie="cookieconsent_onscroll_scripts="+o+";"+t+";path=/"}cookieExpireDate(){const e=new Date;e.setTime(e.getTime()+31536e6);return"expires="+e.toUTCString()}deleteAllCookies(){const e=document.cookie.split("; ");for(let t=0;t<e.length;t++){const o=window.location.hostname.split(".");for(;o.length>0;){const i=encodeURIComponent(e[t].split(";")[0].split("=")[0])+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; domain="+o.join(".")+" ;path=",n=location.pathname.split("/");for(document.cookie=i+"/";n.length>0;)document.cookie=i+n.join("/"),n.pop();o.shift()}}window.localStorage.clear(),console.log("all cookies cleared")}getCookieByName(e){const t=document.cookie.match("(^|[^;]+)\\s*"+e+"\\s*=\\s*([^;]+)");return t?t.pop():""}deleteCookieByName(e){document.cookie=e+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;",console.log(e+" cookie deletetd")}setCookieConsentCategoriesArray(){let e;const t=this.cookieBannerCategories;if(t.length>0)for(let o=0;o<t.length;o++)("allow"===this.cookieConsent||"activated"===t[o].category_cookies)&&(e=encodeURIComponent(t[o].category_title),this.cookieConsentCategoriesArray.set(e,{allowed:!0}),this.addScriptsFromAllowedCatToCookie(t[o].category_title));return this.setConsentCategoriesToCookie(this.cookieConsentCategoriesArray),this.cookieConsentCategoriesArray}setCookieConsentScriptsArray(){let e;const t=this.cookieBannerScripts;if(t.length>0)for(let o=0;o<t.length;o++)("allow"===this.cookieConsent||"activated"===t[o].script_cookies_standard)&&(e=encodeURIComponent(t[o].script_title),this.cookieConsentScriptsArray.set(e,{allowed:!0}));this.setConsentScriptsToCookie(this.cookieConsentScriptsArray);const o=this.cookieConsentScriptsArray;this.createScriptCode(o)}addScriptsFromAllowedCatToCookie(e){const t=this.getElementByValue(this.cookieBannerScripts,"script_category",e);for(let e=0;e<t.length;e++){const o=encodeURIComponent(t[e].script_title);this.cookieConsentScriptsArray.set(o,{allowed:!0})}}createScriptCode(e){let t=[];null!==e&&(e instanceof Map&&(e=JSON.stringify(Array.from(e))),t=JSON.parse(e));const o=this.cookieBannerScripts;if(t.length>0&&o.length>0)for(let e=0;e<t.length;e++){const i=t[e][0],n=decodeURIComponent(i);if(o.length>0&&""!==n)for(let e=0;e<o.length;e++)if(o[e].script_title===n&&o[e].script_codes){const t=o[e].script_codes;for(let e=0;e<t.length;e++)this.createCodeTag(t[e],i,n)}}this.setConsentOnScrollScriptsToCookie(this.cookieConsentOnScrollScriptsArray)}createCodeTag(e,t,o){if(JSON.stringify(e).length>0){const i=e.code_title,n=e.code_position,s=e.code_tag,c=e.code_load_with_timeout,a=e.code_load_with_timeout_time,r=e.code_load_on_scroll,l=(e.code_load_on_scroll_percent,"code_load_on_pages"in e?e.code_load_on_pages:[]),d=window.location.pathname;let k=!0;l.length>0&&-1===l.indexOf(d)&&(k=!1);let h="";if("noscript"===s?h=document.createElement("noscript"):(h=document.createElement("script"),h.setAttribute("type","text/javascript")),h.setAttribute("data-title",o.trim()),h.setAttribute("data-tcb",t),h.setAttribute("data-position",n),h.innerHTML=i.trim(),k)if("scrolled"===this.cookieConsentScrolled){const e=this;"1"===c?setTimeout((function(){e.addScriptTagToDOM(n,h)}),a):e.addScriptTagToDOM(n,h)}else if("1"===r)this.cookieConsentOnScrollScriptsArray.set(t,{allowed:!0});else if("1"===c&&"0"===r){const e=this;setTimeout((function(){e.addScriptTagToDOM(n,h)}),a)}else this.addScriptTagToDOM(n,h)}}addScriptTagToDOM(e,t){"head"===e?document.head.append(t):"body-top"===e?document.body.prepend(t):document.body.appendChild(t)}removeCodeTagByTitle(e){if(""!==e){const t=document.querySelectorAll("[data-tcb]");for(const o in t)t.hasOwnProperty(o)&&t[o].getAttribute("data-tcb")===e&&t[o].remove()}}removeCodeTags(){const e=document.querySelectorAll("[data-tcb]");for(const t in e)e.hasOwnProperty(t)&&e[t].remove()}createSettingsModal(e=""){const t='<div id="tcb-settings-modal" class="tcb-settings-modal" style="display: none;"><div id="tcb-settings-close-btn">&times;</div><div class="tcb-settings-modal-header"><div class="cc-header">'+this.getCookieBannerContent(this.cookieBannerData).settingsTitle+'</div></div>\n<div class="tcb-settings-modal-content">'+this.createSettingsModalTabs(e)+"</div></div>";document.body.insertAdjacentHTML("beforeend",t)}removeSettingsModal(){const e=document.getElementById("tcb-settings-modal");null!==e&&e.remove()}createSettingsModalTabs(e=""){let t="",o="";const i=this.cookieBannerCategories;if(!(i.length>0))return this.getCookieBannerContent(this.cookieBannerData).settingsEmpty;for(let n=0;n<i.length;n++){this.cookieBannerScripts.length>0&&(o=this.createSettingsModalTabsScripts(i[n].category_title,e));const s=i[n].category_text?i[n].category_text:"",c=i[n].category_title?i[n].category_title:"",a=encodeURIComponent(c);let r="";"allow"===e?r="checked":this.cookieConsentCategories.length>0?!0===this.cookieConsentCategories.includes(a)&&(r="checked"):"activated"===i[n].category_cookies&&(r="checked");let l="";"activated"===i[n].category_cookies&&(l='<label class="tcb-switch tcb-categories-switch"><input type="checkbox" '+r+' id="cat_'+a+'" value="'+a+'"  name="tcbCookieCategories"  /><span class="tcb-slider tcb-round"></span></label>');t+='<section id="section'+n+'"><input type="radio" name="sections" id="option'+n+'" '+(0===n?'checked=""':"")+' /><label for="option'+n+'">'+i[n].category_title+'</label><article><div class="tcb-tabs-cat-title"><p>'+c+"</p>"+l+"</div><p>"+s+"</p>"+o+"</article></section>"}let n="Save Settings";this.cookieBannerCategoriesData.categories_save_text&&(n=this.cookieBannerCategoriesData.categories_save_text);let s="layout-1";this.cookieBannerCategoriesData.categories_save_layout&&(s=this.cookieBannerCategoriesData.categories_save_layout);return'<div id="tcbSettings" class="tcb-catTabs">'+t+'</div><div class="tcb-saveSettings"><a id="tcb-save-settings-btn" aria-label="save settings" role="button" tabIndex="0" class="button cc-btn '+s+'">'+n+"</a></div>"}createSettingsModalTabsScripts(e="",t=""){let o="";if(""!==e&&this.cookieBannerScripts.length>0){const i=this.getElementByValue(this.cookieBannerScripts,"script_category",e);if(i.length>0){o+="<ul>";for(let e=0;e<i.length;e++){const n=i[e].script_title?i[e].script_title:"",s=encodeURIComponent(n);let c="";"allow"===t?c="checked":this.cookieConsentScripts.length>0?!0===this.cookieConsentScripts.includes(s)&&(c="checked"):"activated"===i[e].script_cookies_standard&&(c="checked");let a="",r="",l="tcbCookieScripts";"0"===i[e].script_cookies&&(a='disabled="disabled"',r="disabled",l="tcbDisabledCookieScripts"),o+='<li><div class="tcb-script-title">'+n+'</div><label class="tcb-switch tcb-script-switch '+r+'"><input type="checkbox" '+c+' id="script_'+s+'" value="'+s+'"  name="'+l+'" '+a+' /><span class="tcb-slider tcb-round"></span></label><div class="tcb-script-text">'+i[e].script_text+"</div></li>"}o+="</ul>"}}return o}onCheckboxSettings(){this.deleteCookieByName("cookieconsent_scripts"),this.deleteCookieByName("cookieconsent_categories"),this.deleteAllCookies();let e=[],t=[];if(this.cookieConsentScriptsArray=new Map,e=Array.from(document.querySelectorAll("input[name=tcbCookieScripts], input[name=tcbDisabledCookieScripts]")).filter((e=>e.checked)).map((e=>e.value)),e.length>0)for(let t=0;t<e.length;t++)this.cookieConsentScriptsArray.set(e[t],{allowed:!0});if(t=Array.from(document.querySelectorAll("input[name=tcbCookieCategories]")).filter((e=>e.checked)).map((e=>e.value)),t.length>0)for(let e=0;e<t.length;e++)this.cookieConsentCategoriesArray.set(t[e],{allowed:!0}),this.addScriptsFromAllowedCatToCookie(decodeURIComponent(t[e]));this.setConsentOnScrollScriptsToCookie(this.cookieConsentOnScrollScriptsArray),this.cookieConsentOnScrollScripts=this.getCookieByName("cookieconsent_onscroll_scripts"),this.setConsentCategoriesToCookie(this.cookieConsentCategoriesArray),this.setConsentScriptsToCookie(this.cookieConsentScriptsArray),this.allowSettingsCookies(),this.removeCodeTags();const o=this.cookieConsentScriptsArray;this.createScriptCode(o),window.location.reload()}onScrollIncludes(){"scrolled"!==this.cookieConsentScrolled&&(this.cookieConsentScrolled="scrolled",this.cookieConsentOnScrollScripts=this.getCookieByName("cookieconsent_onscroll_scripts"),this.setScrolledCookie(),this.createScriptCode(this.cookieConsentOnScrollScripts))}getElementByValue(e,t,o){return e.filter((function(e){return e[t]===o}))}getCookieBannerContent(e){const t={header:"Cookies used on the website!",allow:"Allow",deny:"Deny",denyActive:"activated",message:"This website uses cookies to ensure you get the best experience on our website.",settings:"Settings",settingsEmpty:"There are no settings available.",settingsActive:"activated",revoke:"Cookie Policy",buttonRevokableColor:"#7faf34",buttonRevokableTextColor:"#ffffff",settingsTitle:"Your personal settings"};return null!=e&&(e.banner_title&&(t.header=e.banner_title),e.button_deny_text&&(t.deny=e.button_deny_text),e.button_accept_text&&(t.allow=e.button_accept_text),e.banner_text&&(t.message=e.banner_text),e.button_settings_text&&(t.settings=e.button_settings_text),e.button_settings_empty&&(t.settingsEmpty=e.button_settings_empty),e.banner_revokable_text&&(t.revoke=e.banner_revokable_text),e.button_revokable_color&&(t.buttonRevokableColor=e.button_revokable_color),e.button_revokable_color&&(t.buttonRevokableTextColor=e.button_revokable_text_color),e.banner_cat_title&&(t.settingsTitle=e.banner_cat_title),t.buttonDenyLayout=e.button_deny_layout,t.buttonDenyActive=e.button_deny_active,t.buttonSettingsLayout=e.button_settings_layout,t.buttonSettingsActive=e.button_settings_active,t.buttonAcceptLayout=e.button_accept_layout),t}}